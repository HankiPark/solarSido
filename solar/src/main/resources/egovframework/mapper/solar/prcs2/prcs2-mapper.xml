<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="solar.prcs2.service.impl.Prcs2Mapper">

	<select id="searchPlanList"  resultType="Prcs2">
		select p.prdt_lot,p.prdt_cd,p.prdt_fg,p.indica_deta_no from prdt_stc p join indica_d i on p.indica_deta_no = i.indica_deta_no and i.indica_no =#{indicaNo}
		where  p.prdt_fg not in ('I','O') order by p.prdt_lot
	
	</select>
	
	<insert id="insertData" useGeneratedKeys="true"
        keyProperty="wkNo" keyColumn="wk_no">
		insert into prcs_m values(CREATENO('WK',wkseq.nextval),sysdate,#{indicaNo},#{empId})
	</insert>
	
	<insert id="insertDetail">
		insert into prcs_d values(prcsseq.nextval,#{prdtLot},#{prdtFg},#{prdtCd},#{indicaDetaNo},null,null,null,#{wkNo},#{wkDt})
	</insert>
</mapper>